# BIG-THREE-TEST

Данный проект является тестовым заданием компании "Большая тройка" на позицию Python backend разработчика.
Цель задания: Создать модель данных для хранения информации о фото и видеофайлах, поступающих с камер, и разработать API для работы с этими данными.
- Модель данных должна содержать информацию о файле (тип, размер, дата создания).
- API должно предоставлять методы для загрузки, получения и удаления файлов.
- API должно поддерживать пагинацию и фильтрацию по дате создания.


## Реализация

Было создано приложение с использованием Django Rest Framework.
В приложении имеется модель данных, хранящая в себе данные о медиа-файлах:
- ссылку на файл
- тип файла
- размер
- дату создания.


Реализованы эндпоинты для сохранения файлов, отображения списка файлов, отображения информации о конкретном файле, удаления файла.


Хранение файлов осуществляется в медиа-директории. При удалении объекта из базы данных также удаляется и связанный с ним файл.


Подробную документацию для API можно посмотреть по эндпоинтам:

```bash
swagger/
 redoc/
```

Написан минимальный объем тестов для проверки корректной работы API.

## Используемые технологии

- Python
- Django Rest Framework
- PostgreSQL
- Swagger

## Установка

1. Склонировать содержимое репозитория GitHub на локальную машину
2. Создать виртуальную среду разработки (для создания использовалась версия Python 3.10.7)
```bash
python3.10 -m venv venv
```
3. Обновить пакетный менеджер и установить зависимости
```bash
source venv/bin/activate
pip install --upgrade pip
pip install -r requirements.txt
```
4. Создать файл .env с конфигурационными параметрами приложения и БД (для примера приложен env_example)
5. Выполнить миграции
```bash
python manage.py makemigrations
python manage.py migrate
```
6. Запустить проект
```bash
python manage.py runserver
```
___
# BIG-THREE-TEST OPTIONAL
Цель дополнительного задания:
- получить фото/видео с камеры из Интернет или вебкамеры в Джанго
- используя готовую модель - распознать объект
- сохранить результат распознавания в Джанго

## Реализация

_Данный функционал реализован в модуле "vision"._

Суть реализации: пользователь на странице приложения вводит url для подключения к камере в поле формы и отправляет запрос, после чего приложение подключается к камере по url и распознает на видео объекты (на данный момент установлены файлы с каскадами Хаара для автомобилей и людей). Обработка видеопотока идет до первого успешного распознавания или до истечения таймаута (по умолчанию 30 сек). После успешного распознавания приложение отправляет запрос на вышеуказанный API для сохранения файла и при успешном сохранении отправляет изображение, на котором желтыми прямоугольниками выделены распознанные объекты на страницу пользователю.

Данное решение предпочтительнее было выполнить в архитектуре микросервисов, но для ускорения процесса разработки оба модуля (API и модуль распознавания объектов) были реализованы в одном приложении.

## Используемые технологии

- Python
- Django
- OpenCV